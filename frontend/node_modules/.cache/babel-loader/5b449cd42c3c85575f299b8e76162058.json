{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\"; // import { setCartProduct } from \"../../thunks/setCartProduct\";\n\nconst initialState = {\n  cart: []\n};\nconst Cart = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    // обычный редюсер !! ?\n    // setCartProduct(state, action: PayloadAction<CartProduct>) {\n    //     // !! искать айдишник в стейте - и менять количество\n    //     // todo вынести в отдельную функцию\n    // },\n    setCartProduct(state, _ref) {\n      let {\n        payload\n      } = _ref;\n      // todo - переписать нормально\n      let s = 0;\n      state.cart.forEach(item => {\n        if (item.id === payload.id && item.color === payload.color) {\n          console.log('ODINAKOVI ', payload.id);\n          item.quantity += payload.quantity;\n          s = 1;\n          return;\n        }\n      });\n\n      if (!s) {\n        state.cart.push(payload);\n      }\n    },\n\n    // todo удалить товар из корзины ??\n    delCartProduct(state, _ref2) {\n      let {\n        payload\n      } = _ref2;\n      state.cart.forEach((item, idx) => {\n        console.log(state.cart[0].id, 'id-cart');\n\n        if (item.id === payload.id && item.color === payload.color) {\n          console.log('item-delete - product', item.id, idx);\n          const newState = [...state.cart(0, idx + 1), ...state.cart(idx)];\n          state.cart = newState;\n        }\n      });\n    }\n\n  },\n  extraReducers: builder => {// builder\n    // .addMatcher(\n    //     isAnyOf(setCartProduct.fulfilled),\n    //     (state, action: PayloadAction<any>) => {\n    //         // console.log(state, 'state!!--cart');\n    //         // console.log(action.payload, 'action.payload');\n    //         state.cart.push(action.payload)\n    //     }\n    // );\n  }\n});\nexport const CartProductReduser = Cart.reducer;\nexport const {\n  setCartProduct,\n  delCartProduct\n} = Cart.actions;","map":{"version":3,"names":["createSlice","initialState","cart","Cart","name","reducers","setCartProduct","state","payload","s","forEach","item","id","color","console","log","quantity","push","delCartProduct","idx","newState","extraReducers","builder","CartProductReduser","reducer","actions"],"sources":["/Users/nn/Desktop/try/LB1/frontend/src/redux/reducers/cartReducer/cartReducer.ts"],"sourcesContent":["import { createSlice, isAnyOf, PayloadAction } from \"@reduxjs/toolkit\";\n// import { setCartProduct } from \"../../thunks/setCartProduct\";\n\n\ninterface CartProduct {\n    id?: string;\n    category?: string;\n    name?: string;\n    price?: number;\n    image?: string;\n    quantity?: number;\n    color?: string;\n}\n\ninterface CartProducts {\n    items: Array<CartProduct>;\n}\n\nconst initialState: CartProducts | any = {\n    cart: []\n}\n\nconst Cart = createSlice({\n    name: 'cart',\n    initialState,\n    reducers: {\n        // обычный редюсер !! ?\n        // setCartProduct(state, action: PayloadAction<CartProduct>) {\n\n        //     // !! искать айдишник в стейте - и менять количество\n\n        //     // todo вынести в отдельную функцию\n\n        // },\n\n        setCartProduct(state, { payload }: PayloadAction<CartProduct>) {\n            // todo - переписать нормально\n            let s = 0;\n            state.cart.forEach((item: any) => {\n                if (item.id === payload.id && item.color === payload.color) {\n                    console.log('ODINAKOVI ', payload.id);\n                    item.quantity += payload.quantity;\n                    s = 1;\n                    return\n                }\n            })\n            if (!s) { state.cart.push(payload); }\n        },\n\n        // todo удалить товар из корзины ??\n        delCartProduct(state, { payload }: PayloadAction<CartProduct>) {\n            state.cart.forEach((item: any, idx: number) => {\n                console.log(state.cart[0].id, 'id-cart');\n                if (item.id === payload.id && item.color === payload.color) {\n                    console.log('item-delete - product', item.id, idx);\n                    const newState = [...state.cart(0, idx+1), ...state.cart(idx)]\n                    state.cart = newState\n                }\n            })\n        },\n    },\n    extraReducers: (builder) => {\n        // builder\n        // .addMatcher(\n        //     isAnyOf(setCartProduct.fulfilled),\n        //     (state, action: PayloadAction<any>) => {\n        //         // console.log(state, 'state!!--cart');\n        //         // console.log(action.payload, 'action.payload');\n        //         state.cart.push(action.payload)\n        //     }\n        // );\n    },\n\n})\n\nexport const CartProductReduser = Cart.reducer;\nexport const { setCartProduct, delCartProduct } = Cart.actions"],"mappings":"AAAA,SAASA,WAAT,QAAoD,kBAApD,C,CACA;;AAiBA,MAAMC,YAAgC,GAAG;EACrCC,IAAI,EAAE;AAD+B,CAAzC;AAIA,MAAMC,IAAI,GAAGH,WAAW,CAAC;EACrBI,IAAI,EAAE,MADe;EAErBH,YAFqB;EAGrBI,QAAQ,EAAE;IACN;IACA;IAEA;IAEA;IAEA;IAEAC,cAAc,CAACC,KAAD,QAAiD;MAAA,IAAzC;QAAEC;MAAF,CAAyC;MAC3D;MACA,IAAIC,CAAC,GAAG,CAAR;MACAF,KAAK,CAACL,IAAN,CAAWQ,OAAX,CAAoBC,IAAD,IAAe;QAC9B,IAAIA,IAAI,CAACC,EAAL,KAAYJ,OAAO,CAACI,EAApB,IAA0BD,IAAI,CAACE,KAAL,KAAeL,OAAO,CAACK,KAArD,EAA4D;UACxDC,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BP,OAAO,CAACI,EAAlC;UACAD,IAAI,CAACK,QAAL,IAAiBR,OAAO,CAACQ,QAAzB;UACAP,CAAC,GAAG,CAAJ;UACA;QACH;MACJ,CAPD;;MAQA,IAAI,CAACA,CAAL,EAAQ;QAAEF,KAAK,CAACL,IAAN,CAAWe,IAAX,CAAgBT,OAAhB;MAA2B;IACxC,CAtBK;;IAwBN;IACAU,cAAc,CAACX,KAAD,SAAiD;MAAA,IAAzC;QAAEC;MAAF,CAAyC;MAC3DD,KAAK,CAACL,IAAN,CAAWQ,OAAX,CAAmB,CAACC,IAAD,EAAYQ,GAAZ,KAA4B;QAC3CL,OAAO,CAACC,GAAR,CAAYR,KAAK,CAACL,IAAN,CAAW,CAAX,EAAcU,EAA1B,EAA8B,SAA9B;;QACA,IAAID,IAAI,CAACC,EAAL,KAAYJ,OAAO,CAACI,EAApB,IAA0BD,IAAI,CAACE,KAAL,KAAeL,OAAO,CAACK,KAArD,EAA4D;UACxDC,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCJ,IAAI,CAACC,EAA1C,EAA8CO,GAA9C;UACA,MAAMC,QAAQ,GAAG,CAAC,GAAGb,KAAK,CAACL,IAAN,CAAW,CAAX,EAAciB,GAAG,GAAC,CAAlB,CAAJ,EAA0B,GAAGZ,KAAK,CAACL,IAAN,CAAWiB,GAAX,CAA7B,CAAjB;UACAZ,KAAK,CAACL,IAAN,GAAakB,QAAb;QACH;MACJ,CAPD;IAQH;;EAlCK,CAHW;EAuCrBC,aAAa,EAAGC,OAAD,IAAa,CACxB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACH;AAjDoB,CAAD,CAAxB;AAqDA,OAAO,MAAMC,kBAAkB,GAAGpB,IAAI,CAACqB,OAAhC;AACP,OAAO,MAAM;EAAElB,cAAF;EAAkBY;AAAlB,IAAqCf,IAAI,CAACsB,OAAhD"},"metadata":{},"sourceType":"module"}